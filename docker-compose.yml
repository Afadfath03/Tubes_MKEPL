services:  
  php-app:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      # Mount ke /var/www/html
      - ./vol:/var/www/html
    depends_on:
      - mysql-db
    ports:
      - 5500:5500

  # MYSQL
  mysql-db:
    image: mysql:latest
    environment:
      MYSQL_ROOT_PASSWORD: php_mysql_pass
      MYSQL_USER: admin    
      MYSQL_DATABASE: mkepl_task-management
      MYSQL_PASSWORD: admin123
    ports:
      - "5501:3306"

  # PHPMYADMIN
  phpmyadmin:
    image: phpmyadmin:latest
    links:
      # akses ke database
      - mysql-db
    ports:
      - "5502:5502"
    environment:
      # Phpmyadmin jadi host database
      PMA_HOST: mysql-db
      # Password
      MYSQL_ROOT_PASSWORD: php_mysql_pass
